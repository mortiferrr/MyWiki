Рассмотрим то, как можно визуализировать таблицу сопряженности и, соответственно, качество [[Классификация|классификации]]. Это делается при помощи **графика покрытия**.
Зачастую в [[Основные задачи машинного обучения|задачах классификации]] нас интересует четрые числа: TP (истинно положительные результаты), FP (ложно положительные результаты), Pos (количество положительных примеров) и Neg (количество отрицательных примеров). Пусть на граифке на оси X расположены все отрицательные примеры, а на оси Y — все положительные примеры. Не важен порядок расположения положительных и отрицательных объектов на осях при условии, что положительные предсказания предешствуют предыдущим. Это дает достаточной информации для построения таблицы сопряженности в виде одной точки на графике:
![[График покрытия.png]]Рассмотрим следующий рисунок:
![[Доминация и нормировка.png]]
На графике справа рассмотрим два классификатора: C1 и C2. Видно, что классификатор C1 лучше, чем C3, ведь он дает более лучшую точность по двум классам. Классификаторы, которые лучше других классификаторов по всем классам, называют **доминирующими**, и говорят, что они **доминируют** над другими классификаторами. Возьмем теперь классификатор C3. Как мы видим, он лучше чем C1 на положительных примерах и хуже на отрицательных. C1 и C3 доминируют над C2, но они не доминируют друг над другом.
**Важное примечание:** На графике покрытия классификаторы, соединенные прямой с угловым коэффициентом 1, обладают одинаковой верностью.

Теперь перенормируем оси, для этого поделим значения на оси X на Neg, а на оси Y — на Pos соответственно. Тогда мы в любом случае получим квадратный график, даже если в ненормированном виде он не являлся таковым. По оси X отложены частоты ложно положительных результатов, по оси Y — [[Относительная частота. Устойчивость относительной частоты|частоты]] истинно положительных результатов соответстенно.
**Замечание:** Из-за того, что график изначально был квадратным, то относительное местоположение классификаторов не поменялось на нормированном графике.
В чем смысл номированного графика? Его смысл в том, что он позволяет соединить результаты разных тестовых наборов на одном нормированном графике покрытия и провести сравнения классификаторов.
**Примечание:** Нормированный график покрытия также называтся РХП-графиком, или же ROC-графиком.
На ROC-графике классификаторы C1 и C3 также соединены (что в общем случае не всегда так) прямой с угловым коэффициентом 1, которая определяется формулой $tpr=fpr+y_{0}$, где $y_0$ — точка пересечения прямой с осью Y. Что же это значит? Давайте разберемся:
**Средняя полнота (avg-rec)** — это средняя арифмитическая сумма истинно положительных и истинно отрицательных частот (положительных и отрицательных полнот). Она также может называться **макроусредненной вероностью**.
Распишем её:
$$
avgrec=\frac{tpr+tnr}{2}=\frac{tpr+1-fpr}{2}=\frac{y_{0}+1}{2}=const
$$
**Важное примечание:** На ROC-графике классификаторы, соединенные прямой с угловым коэффициентом 1, обладают одинаковой средней полнотой. Эти линии также называют **изолиниями средней полноты**. Для графика покрытия же линии, которые параллельны диагональной прямой, соединяют классификаторы с также одинаковой средней полнотой.
![[Средняя полнота.png]]